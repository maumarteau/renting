(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6819ab8b"],{2266:function(t,e,a){var n=a("825a"),r=a("e95a"),i=a("50c4"),s=a("0366"),o=a("35a1"),l=a("9bdd"),c=function(t,e){this.stopped=t,this.result=e},u=t.exports=function(t,e,a,u,d){var f,h,p,m,g,b,v,y=s(e,a,u?2:1);if(d)f=t;else{if(h=o(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(r(h)){for(p=0,m=i(t.length);m>p;p++)if(g=u?y(n(v=t[p])[0],v[1]):y(t[p]),g&&g instanceof c)return g;return new c(!1)}f=h.call(t)}b=f.next;while(!(v=b.call(f)).done)if(g=l(f,y,v.value,u),"object"==typeof g&&g&&g instanceof c)return g;return new c(!1)};u.stop=function(t){return new c(!0,t)}},"4fad":function(t,e,a){var n=a("23e7"),r=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"502e":function(t,e,a){"use strict";var n=a("2b0e");e["a"]=n["default"].mixin({data:function(){return{API_URL:"https://us-central1-lestido-renting.cloudfunctions.net/api"}},methods:{parseGQLErrors:function(t){var e;return t.graphQLErrors&&(e=t.graphQLErrors[0]?t.graphQLErrors[0].message:null),t.networkError&&!e&&(e=t.networkError.result.errors[0]?t.networkError.result.errors[0].message:null),t.message&&!e&&(e=t.message),e||(e="Ha ocurrido un error"),this.$toast.error(e),e}}})},"5d84":function(t,e,a){"use strict";a.r(e);var n,r,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{attrs:{loading:t.loading,pageTitle:"Slides"},scopedSlots:t._u([{key:"breadcrumb",fn:function(){return[a("Breadcrumb")]},proxy:!0},{key:"cta",fn:function(){return[a("router-link",{staticClass:"btn btn-success",attrs:{tag:"a",to:t.$route.path+"/create"}},[t._v("Crear slide")])]},proxy:!0}])},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"filters-box justify-content-between"},[a("div",{staticClass:"filter"},[a("label",[t._v("BUSCAR")]),a("div",{staticClass:"filter-input"},[a("i",{staticClass:"icon icon-search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar"},domProps:{value:t.filters.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateFilters(e)},input:function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)}}}),t.filters.search?a("div",{staticClass:"btn btn-light btn-clear-filter",on:{click:function(e){t.filters.search=null,t.updateFilters()}}},[a("i",{staticClass:"icon icon-close"})]):t._e()])])]),a("table",{staticClass:"table table-clickeable"},[a("tr",{staticClass:"table-head"},[a("td",[t._v("Slide")]),a("td")]),t._l(t.list,(function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"d-flex align-items-center"},[e.image?a("span",{staticClass:"thumb thumb-xl",style:"background-image:url("+e.image.urlThumb+")"}):t._e(),a("div",{staticClass:"tc"},[a("span",{domProps:{innerHTML:t._s(e.formattedTitle)}}),a("span",{staticClass:"text-secondary"},[t._v(t._s(e.link))])])])]),a("td",{staticClass:"text-right"},[a("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.left",modifiers:{left:!0}}],attrs:{"no-caret":"",right:"",title:"Mas acciones"},scopedSlots:t._u([e.loading?{key:"button-content",fn:function(){return[a("i",{staticClass:"icon icon-load-c spin"})]},proxy:!0}:{key:"button-content",fn:function(){return[a("i",{staticClass:"icon icon-dot-3"})]},proxy:!0}],null,!0)},[a("router-link",{attrs:{tag:"b-dropdown-item",to:t.$route.path+"/"+e.id}},[t._v("Editar")]),a("b-dropdown-divider"),a("b-dropdown-item",{staticClass:"delete-item",on:{click:function(a){return t.deletePrompt(e)}}},[a("i",{staticClass:"icon icon-trashcan"}),t._v(" Eliminar")])],1)],1)])}))],2),0==t.list.length?a("div",{staticClass:"alert alert-info text-center"},[t._v(" No se han encontrado slides ")]):t._e(),a("Pagination",{attrs:{pageData:t.pagination},on:{pageChange:t.pageChange}})],1)])])])},s=[],o=a("5530"),l=a("8785"),c=(a("ac1f"),a("841c"),a("d81d"),a("9530")),u=a.n(c),d=a("502e"),f=a("9f12"),h=a("d357"),p={name:"MainSliders",components:{Breadcrumb:h["a"]},mixins:[d["a"],f["a"]],data:function(){return{list:[],loading:!1}},beforeMount:function(){this.filters=this.getValidUrlParams(),this.load()},methods:{load:function(){var t=this;this.$apollo.query({query:u()(n||(n=Object(l["a"])(["\n\t\t\t\t\t\tquery($take: Int, $skip: Int, $search: String) {\n\t\t\t\t\t\t\tmainSliders(\n\t\t\t\t\t\t\t\ttake: $take\n\t\t\t\t\t\t\t\tskip: $skip\n\t\t\t\t\t\t\t\tsearch: $search\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdata {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tformattedTitle\n\t\t\t\t\t\t\t\t\tlink\n\t\t\t\t\t\t\t\t\timage {\n\t\t\t\t\t\t\t\t\t\turlThumb\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpageInfo {\n\t\t\t\t\t\t\t\t\ttotalItems\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]))),variables:{take:this.pagination.length,skip:this.pagination.skip,search:this.filters.search},fetchPolicy:"no-cache"}).then((function(e){t.list=e.data.mainSliders.data.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{loading:!1})})),t.pagination.pageInfo=e.data.mainSliders.pageInfo,t.loading=!1}))},deletePrompt:function(t){var e=this;this.$dialog.confirm({title:"Eliminar slides",body:'¿Está seguro que desea eliminar el slide <strong>"'.concat(t.title,'"</strong>?')},{okText:"Eliminar",customClass:"delete-prompt"}).then((function(){e.delete(t)}))},delete:function(t){var e=this;t.loading=!0,this.$apollo.mutate({mutation:u()(r||(r=Object(l["a"])(["\n\t\t\t\t\t\tmutation($id: ID!) {\n\t\t\t\t\t\t\tmainSliderDelete(id: $id) {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]))),variables:{id:t.id}}).then((function(){e.$toast.success("Elemento eliminado correctamente"),e.load()})).catch((function(a){e.errors=e.parseGQLErrors(a),t.loading=!1}))}}},m=p,g=a("2877"),b=Object(g["a"])(m,i,s,!1,null,null,null);e["default"]=b.exports},"6b2f":function(t,e,a){},"6f53":function(t,e,a){var n=a("83ab"),r=a("df75"),i=a("fc6a"),s=a("d1e7").f,o=function(t){return function(e){var a,o=i(e),l=r(o),c=l.length,u=0,d=[];while(c>u)a=l[u++],n&&!s.call(o,a)||d.push(t?[a,o[a]]:o[a]);return d}};t.exports={entries:o(!0),values:o(!1)}},"9f12":function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(t,e){var a=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=a){var n,r,i=[],s=!0,o=!1;try{for(a=a.call(t);!(s=(n=a.next()).done);s=!0)if(i.push(n.value),e&&i.length===e)break}catch(l){o=!0,r=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(o)throw r}}return i}}var i=a("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return n(t)||r(t,e)||Object(i["a"])(t,e)||s()}a("159b"),a("b64b"),a("4de4"),a("ac1f"),a("5319"),a("c1f9"),a("4fad");var l=a("2b0e");e["a"]=l["default"].mixin({data:function(){return{pagination:{page:1,length:15,pageInfo:{totalItems:0}}}},methods:{getValidUrlParams:function(){var t=this.$route.query;t.page&&(this.pagination.page=t.page,this.pagination.skip=(t.page-1)*this.pagination.length,delete t.page),t.length&&(this.pagination.length=parseInt(t.length)),t.startDate&&(t.startDate=this.$moment(t.startDate).format("YYYY-MM-DD 00:00:00")),t.endDate&&(t.endDate=this.$moment(t.endDate).format("YYYY-MM-DD 23:59:59"));var e={};return Object.keys(t).forEach((function(a){var n=t[a];Array.isArray(n)&&(n=n.filter(Boolean)),""!=n&&null!=n&&n.length>0&&(e[a]=n)})),e},cleanFilters:function(){var t=this.filters,e={};return Object.keys(t).forEach((function(a){var n=t[a];""!=n&&(e[a]=n)})),e},pageChange:function(t){console.log(t);var e=this.getValidUrlParams();e.page=t+1,this.$router.replace({query:e})},pageLength:function(t){var e=this.getValidUrlParams();e.page=1,e.length=t,this.$router.replace({query:e})},selectedDateRangeFilter:function(t){t.startDate?this.filters.startDate=this.$moment(t.startDate).format("YYYY-MM-DD"):this.filters.startDate=null,t.endDate?this.filters.endDate=this.$moment(t.endDate).format("YYYY-MM-DD"):this.filters.endDate=null,this.updateFilters()},updateFilters:function(){var t=this.cleanFilters();t.startDate&&(t.startDate=this.$moment(t.startDate).format("YYYY-MM-DD")),t.endDate&&(t.endDate=this.$moment(t.endDate).format("YYYY-MM-DD")),t=Object.fromEntries(Object.entries(t).filter((function(t){var e=o(t,2),a=(e[0],e[1]);return null!=a}))),delete this.filters.page,this.$router.replace({query:t})}}})},c1f9:function(t,e,a){var n=a("23e7"),r=a("2266"),i=a("8418");n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return r(t,(function(t,a){i(e,t,a)}),void 0,!0),e}})},d357:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fragment",[a("router-link",{staticClass:"breadcrumb-item",attrs:{tag:"li",to:"/"}},[a("i",{staticClass:"icon icon-home-1"})])],1)},r=[],i=(a("3f08"),{}),s=i,o=(a("f7ac"),a("2877")),l=Object(o["a"])(s,n,r,!1,null,"5f4a3668",null);e["a"]=l.exports},f7ac:function(t,e,a){"use strict";a("6b2f")}}]);
//# sourceMappingURL=chunk-6819ab8b.3366bafd.js.map