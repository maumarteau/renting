(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4070b870"],{2266:function(t,e,n){var a=n("825a"),i=n("e95a"),r=n("50c4"),o=n("0366"),s=n("35a1"),l=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},u=t.exports=function(t,e,n,u,d){var f,p,h,g,m,b,v,y=o(e,n,u?2:1);if(d)f=t;else{if(p=s(t),"function"!=typeof p)throw TypeError("Target is not iterable");if(i(p)){for(h=0,g=r(t.length);g>h;h++)if(m=u?y(a(v=t[h])[0],v[1]):y(t[h]),m&&m instanceof c)return m;return new c(!1)}f=p.call(t)}b=f.next;while(!(v=b.call(f)).done)if(m=l(f,y,v.value,u),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};u.stop=function(t){return new c(!0,t)}},"2ac5":function(t,e,n){"use strict";n("ac7a")},"4fad":function(t,e,n){var a=n("23e7"),i=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"6f53":function(t,e,n){var a=n("83ab"),i=n("df75"),r=n("fc6a"),o=n("d1e7").f,s=function(t){return function(e){var n,s=r(e),l=i(s),c=l.length,u=0,d=[];while(c>u)n=l[u++],a&&!o.call(s,n)||d.push(t?[n,s[n]]:s[n]);return d}};t.exports={entries:s(!0),values:s(!1)}},"9f12":function(t,e,n){"use strict";function a(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,i,r=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(a=n.next()).done);o=!0)if(r.push(a.value),e&&r.length===e)break}catch(l){s=!0,i=l}finally{try{o||null==n["return"]||n["return"]()}finally{if(s)throw i}}return r}}var r=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return a(t)||i(t,e)||Object(r["a"])(t,e)||o()}n("159b"),n("b64b"),n("4de4"),n("ac1f"),n("5319"),n("c1f9"),n("4fad");var l=n("2b0e");e["a"]=l["default"].mixin({data:function(){return{pagination:{page:1,length:15,pageInfo:{totalItems:0}}}},methods:{getValidUrlParams:function(){var t=this.$route.query;t.page&&(this.pagination.page=t.page,this.pagination.skip=(t.page-1)*this.pagination.length,delete t.page),t.length&&(this.pagination.length=parseInt(t.length)),t.startDate&&(t.startDate=this.$moment(t.startDate).format("YYYY-MM-DD 00:00:00")),t.endDate&&(t.endDate=this.$moment(t.endDate).format("YYYY-MM-DD 23:59:59"));var e={};return Object.keys(t).forEach((function(n){var a=t[n];Array.isArray(a)&&(a=a.filter(Boolean)),""!=a&&null!=a&&a.length>0&&(e[n]=a)})),e},cleanFilters:function(){var t=this.filters,e={};return Object.keys(t).forEach((function(n){var a=t[n];""!=a&&(e[n]=a)})),e},pageChange:function(t){console.log(t);var e=this.getValidUrlParams();e.page=t+1,this.$router.replace({query:e})},pageLength:function(t){var e=this.getValidUrlParams();e.page=1,e.length=t,this.$router.replace({query:e})},selectedDateRangeFilter:function(t){t.startDate?this.filters.startDate=this.$moment(t.startDate).format("YYYY-MM-DD"):this.filters.startDate=null,t.endDate?this.filters.endDate=this.$moment(t.endDate).format("YYYY-MM-DD"):this.filters.endDate=null,this.updateFilters()},updateFilters:function(){var t=this.cleanFilters();t.startDate&&(t.startDate=this.$moment(t.startDate).format("YYYY-MM-DD")),t.endDate&&(t.endDate=this.$moment(t.endDate).format("YYYY-MM-DD")),t=Object.fromEntries(Object.entries(t).filter((function(t){var e=s(t,2),n=(e[0],e[1]);return null!=n}))),delete this.filters.page,this.$router.replace({query:t})}}})},ac7a:function(t,e,n){},b82c:function(t,e,n){"use strict";n.r(e);var a,i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{attrs:{loading:t.loading,pageTitle:"Secciones"},scopedSlots:t._u([{key:"breadcrumb",fn:function(){return[n("Breadcrumb")]},proxy:!0},{key:"cta",fn:function(){return[n("router-link",{staticClass:"btn btn-success",attrs:{tag:"a",to:"/sections/create"}},[t._v("Crear sección")])]},proxy:!0}])},[n("div",{staticClass:"main-container container-fluid"},[n("div",{staticClass:"card mt-2"},[n("div",{staticClass:"card-body"},[n("table",{staticClass:"table table-clickeable"},[n("tr",{staticClass:"table-head"},[n("td"),n("td",[t._v("Titulo")]),n("td",[t._v("Url")]),n("td")]),t._l(t.list,(function(e){return n("tr",{key:e.id},[n("td",[e.featured?n("i",{staticClass:"icon icon-star"}):n("i",{staticClass:"icon icon-star-o"})]),n("td",[n("div",{staticClass:"d-flex align-items-center"},[t._v(" "+t._s(e.title)+" ")])]),n("td",[n("div",{staticClass:"d-flex align-items-center"},[t._v(" "+t._s(e.slug)+" ")])]),n("td",{staticClass:"text-right"},[n("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.left",modifiers:{left:!0}}],attrs:{"no-caret":"",right:"",title:"Mas acciones"},scopedSlots:t._u([e.loading?{key:"button-content",fn:function(){return[n("i",{staticClass:"icon icon-load-c spin"})]},proxy:!0}:{key:"button-content",fn:function(){return[n("i",{staticClass:"icon icon-dot-3"})]},proxy:!0}],null,!0)},[n("router-link",{attrs:{tag:"b-dropdown-item",to:t.$route.path+"/"+e.id}},[t._v("Editar")]),n("b-dropdown-divider"),n("b-dropdown-item",{on:{click:function(n){return t.deletePrompt(e)}}},[t._v("Eliminar")])],1)],1)])}))],2),0==t.list.length?n("div",{staticClass:"alert alert-info text-center"},[t._v("No se han encontrado páginas")]):t._e(),n("Pagination",{attrs:{pageData:t.pagination},on:{pageChange:t.pageChange}})],1)])])])},o=[],s=n("8785"),l=n("9530"),c=n.n(l),u=n("9f12"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("router-link",{staticClass:"breadcrumb-item",attrs:{tag:"li",to:"/"}},[n("i",{staticClass:"icon icon-home-1"})])],1)},f=[],p=(n("3f08"),{}),h=p,g=(n("2ac5"),n("2877")),m=Object(g["a"])(h,d,f,!1,null,"159165e2",null),b=m.exports,v={name:"Pages",components:{Breadcrumb:b},mixins:[u["a"]],data:function(){return{list:[],loading:!1}},beforeMount:function(){this.filters=this.getValidUrlParams(),this.load()},methods:{load:function(){var t=this;this.$apollo.query({query:c()(a||(a=Object(s["a"])(["query ($take: Int, $skip: Int) {\n\t\t\t\t\tpages(take: $take, skip: $skip) {\n\t\t\t\t\t\tdata{\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\tfeatured\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpageInfo{\n\t\t\t\t\t\t\ttotalItems\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}"]))),variables:{take:this.pagination.length,skip:this.pagination.skip},fetchPolicy:"network-only"}).then((function(e){t.list=e.data.pages.data,t.pagination.pageInfo=e.data.pages.pageInfo,t.loading=!1}))},deletePrompt:function(t){var e=this;this.$dialog.confirm({title:"Eliminar página",body:'¿Está seguro que desea eliminar la página <strong>"'.concat(t.title,'"</strong>?')},{okText:"Eliminar",customClass:"delete-prompt"}).then((function(){e.delete(t)}))},delete:function(t){var e=this;t.loading=!0,this.$apollo.mutate({mutation:c()(i||(i=Object(s["a"])(["mutation ( $id: ID! ){\n\t\t\t\t\tpageDelete( id: $id) {\n\t\t\t\t\t\tid\n\t\t\t\t\t}\n\t\t\t\t}"]))),variables:{id:t.id}}).then((function(){e.$toast.success("Elemento eliminado correctamente"),e.load()})).catch((function(n){e.errors=e.parseGQLErrors(n),t.loading=!1}))}}},y=v,D=Object(g["a"])(y,r,o,!1,null,null,null);e["default"]=D.exports},c1f9:function(t,e,n){var a=n("23e7"),i=n("2266"),r=n("8418");a({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){r(e,t,n)}),void 0,!0),e}})}}]);
//# sourceMappingURL=chunk-4070b870.476e715a.js.map