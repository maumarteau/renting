(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProductDetail"],{"502e":function(t,s,a){"use strict";var i=a("2b0e");s["a"]=i["default"].mixin({data:function(){return{API_URL:"https://us-central1-lestido-renting.cloudfunctions.net/api"}},methods:{parseGQLErrors:function(t){var s;return t.graphQLErrors&&(s=t.graphQLErrors[0]?t.graphQLErrors[0].message:null),t.networkError&&!s&&(s=t.networkError.result.errors[0]?t.networkError.result.errors[0].message:null),t.message&&!s&&(s=t.message),s||(s="Ha ocurrido un error"),this.$toast.error(s),s}}})},"6f8a":function(t,s,a){},a260:function(t,s,a){"use strict";a.r(s);var i,e,l,r=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("Layout",{attrs:{loading:t.loading,pageTitle:t.item?t.item.title:"Detalle del vehículo"},scopedSlots:t._u([{key:"breadcrumb",fn:function(){return[a("Breadcrumb")]},proxy:!0},{key:"cta",fn:function(){return[a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"d-flex mr-3"},[a("i",{staticClass:"dot mt-1 mr-1",class:"dot-"+t.item.statusClass}),a("span",[t._v(t._s(t.item.statusText))])]),a("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:"/products/"+t.item.id+"/edit"}},[a("i",{staticClass:"icon icon-edit mr-1"}),t._v(" Editar ")]),a("b-dropdown",{staticClass:"dropdown-dots",attrs:{"no-caret":"",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"icon icon-dot-3"})]},proxy:!0}])},[a("b-dropdown-item",{on:{click:function(s){return t.toggleStatus()}}},["INACTIVE"==t.item.status?a("span",[t._v("Activar")]):"ACTIVE"==t.item.status?a("span",[t._v("Marcar como vendido")]):a("span",[t._v("Activar")])]),a("b-dropdown-item",{staticClass:"delete-item",on:{click:function(s){return t.deletePrompt(t.item)}}},[a("i",{staticClass:"icon icon-trashcan"}),t._v(" Eliminar ")])],1)],1)]},proxy:!0}])},[!t.loading&&t.item?a("div",{staticClass:"main-container container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-8"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h5",{staticClass:"mb-0"},[t._v("Galería de fotos")])]),a("div",{staticClass:"card-body"},[t.item.files&&t.item.files.length>0?a("div",{staticClass:"row"},t._l(t.item.files,(function(s){return a("div",{key:s.id,staticClass:"col-6 col-md-4 col-lg-3 mb-3"},[a("div",{staticClass:"photo-thumbnail"},[a("img",{staticClass:"img-fluid",attrs:{src:s.urlThumb,alt:t.item.title}})])])})),0):a("div",{staticClass:"text-center text-muted py-4"},[a("i",{staticClass:"icon icon-image",staticStyle:{"font-size":"48px"}}),a("p",{staticClass:"mt-2"},[t._v("No hay fotos disponibles")])])])])]),a("div",{staticClass:"col-12 col-lg-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h5",{staticClass:"mb-0"},[t._v("Información del vehículo")])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Título")]),a("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.item.title))])]),a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Slug")]),a("div",{staticClass:"font-monospace small"},[t._v(t._s(t.item.slug))])]),a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Precio")]),a("div",{staticClass:"font-weight-bold text-success"},[t._v(" U$S "+t._s(t.item.price?t.item.price.toLocaleString():"0")+" ")])]),t.item.brand?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Marca")]),a("div",[t._v(t._s(t.item.brand))])]):t._e(),t.item.model?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Modelo")]),a("div",[t._v(t._s(t.item.model))])]):t._e(),t.item.year?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Año")]),a("div",[t._v(t._s(t.item.year))])]):t._e(),t.item.mileage?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Kilometraje")]),a("div",[t._v(t._s(t.item.mileage))])]):t._e(),t.item.fuel?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Combustible")]),a("div",[t._v(t._s(t.getFuelLabel(t.item.fuel)))])]):t._e(),t.item.transmission?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Transmisión")]),a("div",[t._v(t._s(t.getTransmissionLabel(t.item.transmission)))])]):t._e(),t.item.color?a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Color")]),a("div",[t._v(t._s(t.item.color))])]):t._e()])])])]),t.item.description?a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h5",{staticClass:"mb-0"},[t._v("Descripción")])]),a("div",{staticClass:"card-body"},[a("div",{domProps:{innerHTML:t._s(t.item.description)}})])])])]):t._e(),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h5",{staticClass:"mb-0"},[t._v("Información adicional")])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Fecha de creación")]),a("div",[t._v(t._s(t.formatDate(t.item.createdAt)))])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"info-item mb-3"},[a("label",{staticClass:"text-muted small"},[t._v("Última actualización")]),a("div",[t._v(t._s(t.formatDate(t.item.updatedAt)))])])])])])])])])]):t._e()])},n=[],o=a("8785"),c=a("9530"),d=a.n(c),u=a("502e"),m=a("d479"),v={name:"ProductDetail",components:{Breadcrumb:m["a"]},mixins:[u["a"]],data:function(){return{item:null,loading:!0}},beforeMount:function(){this.load()},methods:{load:function(){var t=this;this.loading=!0,this.$apollo.query({query:d()(i||(i=Object(o["a"])(["\n\t\t\t\t\t\tquery($id: ID!) {\n\t\t\t\t\t\t\tproduct(id: $id) {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tfiles {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t\t\t\tfilename\n\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\turlThumb\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbrand\n\t\t\t\t\t\t\t\tmodel\n\t\t\t\t\t\t\t\tyear\n\t\t\t\t\t\t\t\tmileage\n\t\t\t\t\t\t\t\tfuel\n\t\t\t\t\t\t\t\ttransmission\n\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\tstatus\n\t\t\t\t\t\t\t\tstatusText\n\t\t\t\t\t\t\t\tstatusClass\n\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]))),variables:{id:this.$route.params.id},fetchPolicy:"network-only"}).then((function(s){var a=s.data;t.item=a.product,t.loading=!1})).catch((function(){t.$toast.error("El vehículo no existe"),t.$router.push("/products")}))},toggleStatus:function(){var t=this,s="ACTIVE";"ACTIVE"===this.item.status?s="SOLD":"SOLD"===this.item.status&&(s="ACTIVE"),this.$apollo.mutate({mutation:d()(e||(e=Object(o["a"])(["\n\t\t\t\t\t\tmutation($id: ID!, $status: String!) {\n\t\t\t\t\t\t\tproductToggleStatus(id: $id, status: $status) {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tstatus\n\t\t\t\t\t\t\t\tstatusText\n\t\t\t\t\t\t\t\tstatusClass\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]))),variables:{id:this.item.id,status:s}}).then((function(s){var a=s.data;t.item.status=a.productToggleStatus.status,t.item.statusText=a.productToggleStatus.statusText,t.item.statusClass=a.productToggleStatus.statusClass,t.$toast.success("Estado actualizado correctamente")})).catch((function(s){t.parseGQLErrors(s)}))},deletePrompt:function(t){var s=this;this.$dialog.confirm({title:"Eliminar vehículo",body:'¿Está seguro que desea eliminar el vehículo "<strong>'.concat(t.title,'</strong>"?')},{okText:"Eliminar",customClass:"delete-prompt"}).then((function(){s.delete(t)}))},delete:function(t){var s=this;this.$apollo.mutate({mutation:d()(l||(l=Object(o["a"])(["\n\t\t\t\t\t\tmutation($id: ID!) {\n\t\t\t\t\t\t\tproductDelete(id: $id) {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]))),variables:{id:t.id}}).then((function(){s.$toast.success("Vehículo eliminado correctamente"),s.$router.push("/products")})).catch((function(t){s.parseGQLErrors(t)}))},getFuelLabel:function(t){var s={gasoline:"Nafta",diesel:"Gasoil",hybrid:"Híbrido",electric:"Eléctrico"};return s[t]||t},getTransmissionLabel:function(t){var s={manual:"Manual",automatic:"Automática"};return s[t]||t},formatDate:function(t){return t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}}},C=v,b=(a("c502"),a("2877")),f=Object(b["a"])(C,r,n,!1,null,"390c98e3",null);s["default"]=f.exports},c502:function(t,s,a){"use strict";a("6f8a")},d479:function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("router-link",{staticClass:"breadcrumb-item",attrs:{tag:"li",to:"/"}},[a("i",{staticClass:"icon icon-home-1"})]),a("router-link",{staticClass:"breadcrumb-item",attrs:{tag:"li",to:"/products"}},[t._v(" Vehículos usados ")]),"ProductCreate"==t.$route.name?a("li",{staticClass:"breadcrumb-item active"},[t._v(" Crear ")]):t._e(),"ProductEdit"==t.$route.name?a("li",{staticClass:"breadcrumb-item active"},[t._v(" Editar ")]):t._e(),"ProductDetail"==t.$route.name?a("li",{staticClass:"breadcrumb-item active"},[t._v(" Detalle ")]):t._e()],1)},e=[],l={name:"ProductBreadcrumb"},r=l,n=a("2877"),o=Object(n["a"])(r,i,e,!1,null,null,null);s["a"]=o.exports}}]);
//# sourceMappingURL=ProductDetail.25e54bff.js.map